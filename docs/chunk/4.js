(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"114":function(e,t){},"147":function(e,t,a){},"153":function(e,t,a){},"164":function(e,t,a){"use strict";a.r(t);var n=a(6),c=a(15),r=a.n(c),o=a(113),i=a.n(o),l=a(103),s=a(2),u=a(3),m=a(4),d=a(19),p=a(11),f=a(12),b=a(5),y=a(160),v=(a(146),a(147),function(e){Object(p.a)(VideoPlayer,e);var t=Object(f.a)(VideoPlayer);function VideoPlayer(){var e;Object(u.a)(this,VideoPlayer);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return e=t.call.apply(t,[this].concat(n)),Object(b.a)(Object(d.a)(e),"state",{"play":!0}),Object(b.a)(Object(d.a)(e),"videoNode",void 0),Object(b.a)(Object(d.a)(e),"player",void 0),Object(b.a)(Object(d.a)(e),"playVideo",(function(){e.setState({"play":!0},(function(){e.player.play()}))})),Object(b.a)(Object(d.a)(e),"pauseVideo",(function(){e.setState({"play":!1},(function(){e.player.pause()}))})),Object(b.a)(Object(d.a)(e),"togglePlay",(function(){e.setState({"play":!e.state.play},(function(){e.state.play?e.player.play():e.player.pause()}))})),e}return Object(m.a)(VideoPlayer,[{"key":"componentDidMount","value":function componentDidMount(){this.player=Object(y.a)(this.videoNode,Object(s.a)({},this.props),(function(){}))}},{"key":"componentWillUnmount","value":function componentWillUnmount(){this.player&&this.player.dispose()}},{"key":"render","value":function render(){var e=this,t=this.props.src;return r.a.createElement("div",{"onClick":this.togglePlay,"onTouchStart":this.togglePlay,"className":"hello"},r.a.createElement("div",{"data-vjs-player":!0},r.a.createElement("video",{"ref":function ref(t){return e.videoNode=t},"className":"video-js my-video","preload":"auto","data-setup":"{}","loop":!0,"webkit-playsInline":!0,"playsInline":!0},r.a.createElement("source",{"src":t,"type":"video/mp4"}))))}}]),VideoPlayer}(r.a.Component)),O=a(17),j=a.n(O),h=a(10),E=a(24),N=a(154),k=a(148),g=function fetchComments(e){return Promise.resolve({"errNo":0,"errMsg":"success","data":[{"userName":"张三","commentId":"7fcf133384aa457997bb5d68663ff511","mediaId":"3451e401fc134abe9760613a687a0aee","content":"嗑死新垣结衣和堺雅人了！～","createTime":"1971-01-01 00:00:00","updateTime":"1971-01-01 00:00:00"}]})},x=(a(150),a(151),a(152),a(153),Object(l.b)({"key":"commentAtom","default":{"isOpened":!1,"data":[]}})),C=function Comment(){var e=Object(l.c)(x),t=Object(n.a)(e,2),a=t[0],c=a.isOpened,o=a.data,i=t[1];return r.a.createElement(N.b,{"isOpened":c,"title":"评论","scrollY":!0,"scrollTop":800,"onClose":function onClose(){i({"isOpened":!1,"data":[]})}},o.map((function(e,t){return r.a.createElement("div",{"key":t,"className":"comment"},r.a.createElement(N.a,{"circle":!0,"text":e.userName,"size":"small","className":"comment-avatar"}),r.a.createElement("div",{"className":"comment-main"},r.a.createElement("div",{"className":"comment-name"},e.userName),r.a.createElement("div",{"className":"comment-content"},e.content),r.a.createElement("div",{"className":"comment-time"},e.updateTime)))})))},I=function CommentIcon(e){e.commentId;var t=Object(l.d)(x),a=function useData(e){var t=Object(c.useState)([]),a=Object(n.a)(t,2),r=a[0],o=a[1];return Object(c.useEffect)((function(){(function(){var e=Object(E.a)(j.a.mark((function _callee(){var e;return j.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g();case 3:e=t.sent,o((function(t){return[].concat(Object(h.a)(t),Object(h.a)(Object(k.get)(e,"data")||[]))})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),_callee,null,[[0,7]])})));return function init(){return e.apply(this,arguments)}})()()}),[]),r}(),o=Object(c.useCallback)((function(){t({"isOpened":!0,"data":a})}),[a]);return r.a.createElement("div",{"className":"tiktok-comment"},r.a.createElement("div",{"onClick":o},r.a.createElement(N.c,{"className":"tiktok-comment-icon","value":"message","customStyle":{"fontSize":40},"color":"#FFF"}),r.a.createElement("div",{"className":"tiktok-comment-text"},"写评论")))},S=function useData(){var e=Object(c.useState)((function(){return function fetchMedias(){return JSON.parse('{"errNo":0,"errMsg":"success","data":[{"userName":"张三","mediaId":"3451e401fc134abe9760613a687a0aee","resource":"https://mp4.vjshi.com/2019-12-10/5bcb45461c10a929ab0ddab665ba9ef5.mp4","createTime":"1971-01-01 00:00:00","updateTime":"1971-01-01 00:00:00"},{"userName":"张三","mediaId":"c1740663f4a24527b6225e03f0aea5bf","resource":"https://mp4.vjshi.com/2020-03-13/575bf5e035a1c0b1c820b03f99e99ce6.mp4","createTime":"1971-01-01 00:00:00","updateTime":"1971-01-01 00:00:00"},{"userName":"李四","mediaId":"9a9947bdea044678885769cd413e2878","resource":"https://mp4.vjshi.com/2019-12-09/5ef77dc687c0fb13e0fb6242b50074e1.mp4","createTime":"1971-01-01 00:00:00","updateTime":"1971-01-01 00:00:00"}]}')}().data}));return Object(n.a)(e,1)[0]};t.default=function Fullpage(){var e=r.a.useRef([]),t=S(),a=Object(c.useCallback)((function(t,a){var n=e.current[a.index];n&&n.player&&(document.addEventListener("WeixinJSBridgeReady",(function(){e.current.forEach((function(e,t){e.player.play(),t!==a.index&&e.player.pause()}))}),!1),n.player.play());var c=e.current[t.index];t.index!==a.index&&c&&c.player&&c.player.pause()}),[e.current]),n=Object(c.useCallback)((function(){return r.a.createElement("div",null,t.map((function(a,n){return r.a.createElement("div",{"className":"section","key":n},r.a.createElement(v,{"src":a.resource,"ref":function ref(a){e.current.length<t.length&&e.current.push(a)}}),r.a.createElement(I,{"commentId":a.mediaId}))})))}),[t]);return 0===t.length?null:r.a.createElement(l.a,null,r.a.createElement(i.a,{"licenseKey":"YOUR_KEY_HERE","continuousVertical":!0,"scrollingSpeed":500,"afterLoad":a,"render":n}),r.a.createElement(C,null))}}}]);