(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"123":function(e,t){},"156":function(e,t,a){},"184":function(e,t,a){},"195":function(e,t,a){"use strict";a.r(t);var n=a(6),c=a(15),r=a.n(c),o=a(122),i=a.n(o),l=a(104),s=a(2),u=a(3),m=a(4),d=a(19),p=a(11),f=a(12),b=a(5),v=a(191),y=(a(155),a(156),function(e){Object(p.a)(VideoPlayer,e);var t=Object(f.a)(VideoPlayer);function VideoPlayer(){var e;Object(u.a)(this,VideoPlayer);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return e=t.call.apply(t,[this].concat(n)),Object(b.a)(Object(d.a)(e),"state",{"play":!0}),Object(b.a)(Object(d.a)(e),"videoNode",void 0),Object(b.a)(Object(d.a)(e),"player",void 0),Object(b.a)(Object(d.a)(e),"playVideo",(function(){e.setState({"play":!0},(function(){e.player.play()}))})),Object(b.a)(Object(d.a)(e),"pauseVideo",(function(){e.setState({"play":!1},(function(){e.player.pause()}))})),Object(b.a)(Object(d.a)(e),"togglePlay",(function(){e.setState({"play":!e.state.play},(function(){e.state.play?e.player.play():e.player.pause()}))})),e}return Object(m.a)(VideoPlayer,[{"key":"componentDidMount","value":function componentDidMount(){this.player=Object(v.a)(this.videoNode,Object(s.a)({},this.props),(function(){}))}},{"key":"componentWillUnmount","value":function componentWillUnmount(){this.player&&this.player.dispose()}},{"key":"render","value":function render(){var e=this,t=this.props.src;return r.a.createElement("div",{"onClick":this.togglePlay,"onTouchStart":this.togglePlay,"className":"hello"},r.a.createElement("div",{"data-vjs-player":!0},r.a.createElement("video",{"ref":function ref(t){return e.videoNode=t},"className":"video-js my-video","preload":"auto","data-setup":"{}","loop":!0,"webkit-playsInline":!0,"playsInline":!0},r.a.createElement("source",{"src":t,"type":"video/mp4"}))))}}]),VideoPlayer}(r.a.Component)),O=a(17),j=a.n(O),h=a(24),E=a(185),k=a(157),N=a(159),g=a.n(N),C=function fetchComments(e){return g.a.get("http://106.54.76.130:8080/confucius/comment/getCommentList?mediaId=".concat(e))},x=function postComment(e){return g.a.post("http://106.54.76.130:8080/confucius/comment/publicComment",e)},I=(a(178),a(179),a(180),a(181),a(182),a(183),a(184),Object(l.b)({"key":"commentAtom","default":{"isOpened":!1,"mediaId":"","data":[]}})),S=function Comment(){var e=Object(l.c)(I),t=Object(n.a)(e,2),a=t[0],o=a.isOpened,i=a.mediaId,u=a.data,m=t[1],d=Object(c.useState)(""),p=Object(n.a)(d,2),f=p[0],b=p[1],v=Object(c.useState)(!1),y=Object(n.a)(v,2),O=y[0],N=y[1],g=Object(c.useCallback)(Object(h.a)(j.a.mark((function _callee2(){var e;return j.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:if(!f){t.next=15;break}return N(!0),t.prev=2,t.next=5,x({"mediaId":i,"content":f,"userName":"郭麒麟"});case 5:return t.next=7,C(i);case 7:e=t.sent,m((function(t){return Object(s.a)(Object(s.a)({},t),{},{"data":Object(k.get)(e,"data.data")||[]})})),b(""),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(2);case 14:N(!1);case 15:case"end":return t.stop()}}),_callee2,null,[[2,12]])}))),[i,f]);return r.a.createElement(E.c,{"isOpened":o,"title":"评论","scrollTop":800,"onClose":function onClose(){m({"isOpened":!1,"mediaId":"","data":[]})}},r.a.createElement("div",{"className":"comment-main"},u.map((function(e,t){return r.a.createElement("div",{"key":t,"className":"comment"},r.a.createElement(E.a,{"circle":!0,"text":e.userName,"size":"small","className":"comment-avatar"}),r.a.createElement("div",{"className":"comment-main"},r.a.createElement("div",{"className":"comment-name"},e.userName),r.a.createElement("div",{"className":"comment-content"},e.content),r.a.createElement("div",{"className":"comment-time"},e.updateTime)))}))),r.a.createElement("div",{"className":"comment-input"},r.a.createElement(E.e,{"name":"comment","type":"text","placeholder":"请输入评论","value":f,"onChange":function onInputChange(e){b(e)}},r.a.createElement(E.b,{"size":"small","type":"primary","loading":O,"onClick":g},"发表"))))},w=function CommentIcon(e){var t=e.commentId,a=Object(l.d)(I),o=function useData(e){var t=Object(c.useState)([]),a=Object(n.a)(t,2),r=a[0],o=a[1];return Object(c.useEffect)((function(){(function(){var t=Object(h.a)(j.a.mark((function _callee(){var t;return j.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,C(e);case 3:t=a.sent,o(Object(k.get)(t,"data.data")||[]),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}}),_callee,null,[[0,7]])})));return function init(){return t.apply(this,arguments)}})()()}),[]),r}(t),i=Object(c.useCallback)((function(){a({"isOpened":!0,"data":o,"mediaId":t})}),[o]);return r.a.createElement("div",{"className":"tiktok-comment"},r.a.createElement("div",{"onClick":i},r.a.createElement(E.d,{"className":"tiktok-comment-icon","value":"message","customStyle":{"fontSize":40},"color":"#FFF"}),r.a.createElement("div",{"className":"tiktok-comment-text"},"写评论")))},P=function useData(){var e=Object(c.useState)((function(){return function fetchMedias(){return JSON.parse('{"errNo":0,"errMsg":"success","data":[{"userName":"张三","mediaId":"3451e401fc134abe9760613a687a0aee","resource":"https://mp4.vjshi.com/2019-12-10/5bcb45461c10a929ab0ddab665ba9ef5.mp4","createTime":"1971-01-01 00:00:00","updateTime":"1971-01-01 00:00:00"},{"userName":"张三","mediaId":"c1740663f4a24527b6225e03f0aea5bf","resource":"https://mp4.vjshi.com/2020-03-13/575bf5e035a1c0b1c820b03f99e99ce6.mp4","createTime":"1971-01-01 00:00:00","updateTime":"1971-01-01 00:00:00"},{"userName":"李四","mediaId":"9a9947bdea044678885769cd413e2878","resource":"https://mp4.vjshi.com/2019-12-09/5ef77dc687c0fb13e0fb6242b50074e1.mp4","createTime":"1971-01-01 00:00:00","updateTime":"1971-01-01 00:00:00"}]}')}().data}));return Object(n.a)(e,1)[0]};t.default=function Fullpage(){var e=r.a.useRef([]),t=P(),a=Object(c.useCallback)((function(t,a){var n=e.current[a.index];n&&n.player&&(document.addEventListener("WeixinJSBridgeReady",(function(){e.current.forEach((function(e,t){e.player.play(),t!==a.index&&e.player.pause()}))}),!1),n.player.play());var c=e.current[t.index];t.index!==a.index&&c&&c.player&&c.player.pause()}),[e.current]),n=Object(c.useCallback)((function(){return r.a.createElement("div",null,t.map((function(a,n){return r.a.createElement("div",{"className":"section","key":n},r.a.createElement(y,{"src":a.resource,"ref":function ref(a){e.current.length<t.length&&e.current.push(a)}}),r.a.createElement(w,{"commentId":a.mediaId}))})))}),[t]);return 0===t.length?null:r.a.createElement(l.a,null,r.a.createElement(i.a,{"licenseKey":"YOUR_KEY_HERE","continuousVertical":!0,"scrollingSpeed":500,"afterLoad":a,"render":n}),r.a.createElement(S,null))}}}]);