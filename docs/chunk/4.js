(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"148":function(e,t){},"181":function(e,t,a){},"185":function(e,t,a){},"196":function(e,t,a){},"197":function(e,t,a){},"204":function(e,t,a){"use strict";a.r(t);var n=a(6),c=a(16),r=a.n(c),l=a(145),i=a.n(l),o=a(135),s=a(134),u=(a(146),a(147),a(2)),m=a(3),d=a(4),p=a(20),b=a(12),f=a(13),O=a(5),j=a(199),v=(a(180),a(181),function(e){Object(b.a)(VideoPlayer,e);var t=Object(f.a)(VideoPlayer);function VideoPlayer(){var e;Object(m.a)(this,VideoPlayer);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return e=t.call.apply(t,[this].concat(n)),Object(O.a)(Object(p.a)(e),"state",{"play":!0}),Object(O.a)(Object(p.a)(e),"videoNode",void 0),Object(O.a)(Object(p.a)(e),"player",void 0),Object(O.a)(Object(p.a)(e),"playVideo",(function(){e.setState({"play":!0},(function(){e.player.play()}))})),Object(O.a)(Object(p.a)(e),"pauseVideo",(function(){e.setState({"play":!1},(function(){e.player.pause()}))})),Object(O.a)(Object(p.a)(e),"togglePlay",(function(){e.setState({"play":!e.state.play},(function(){e.state.play?e.player.play():e.player.pause()}))})),e}return Object(d.a)(VideoPlayer,[{"key":"componentDidMount","value":function componentDidMount(){this.player=Object(j.a)(this.videoNode,Object(u.a)({},this.props),(function(){}))}},{"key":"componentWillUnmount","value":function componentWillUnmount(){this.player&&this.player.dispose()}},{"key":"render","value":function render(){var e=this,t=this.props.src;return r.a.createElement("div",{"onClick":this.togglePlay,"onTouchStart":this.togglePlay,"className":"hello"},r.a.createElement("div",{"data-vjs-player":!0},r.a.createElement("video",{"ref":function ref(t){return e.videoNode=t},"className":"video-js my-video","preload":"auto","data-setup":"{}","loop":!0,"webkit-playsInline":!0,"playsInline":!0},r.a.createElement("source",{"src":t,"type":"video/mp4"}))))}}]),VideoPlayer}(r.a.Component)),y=a(201),E=a(18),h=a.n(E),g=a(11),k=a(24),N=a(182),x=a.n(N),C=a(35),I=a(32),S={"userId":"4396","userName":"苏檀儿","avatar":"http://img.7qile.com/ql202006/6474.jpg"},w=(a(183),a(184),a(185),{"userName":"小刘同学","avatar":"http://e0.ifengimg.com/04/2019/0201/858D15BF94432706808480AAA0B6EE29D561468E_size33_w600_h375.jpeg"}),_=function ChatItem(e){var t=e.content,a=(e.userName,e.isMyself),n=e.avatar;return r.a.createElement("div",{"className":x()("chat-item",Object(O.a)({},"chat-item-myself",a))},r.a.createElement("div",{"className":"chat-avatar"},r.a.createElement(s.a,{"circle":!0,"image":n,"size":"small"})),r.a.createElement("div",{"className":"chat-content"},r.a.createElement("div",{"className":"chat-content-text"},t)))},P=function Chat(){var e=Object(c.useState)([Object(u.a)({"content":"你好呀~","isMyself":!1},w)]),t=Object(n.a)(e,2),a=t[0],l=t[1],i=Object(c.useState)(""),o=Object(n.a)(i,2),m=o[0],d=o[1],p=Object(c.useCallback)(Object(k.a)(h.a.mark((function _callee(){var e,t,a;return h.a.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return l((function(e){return[].concat(Object(g.a)(e),[Object(u.a)({"content":m,"isMyself":!0},S)])})),d(""),e=localStorage.getItem("token"),n.next=5,Object(I.d)({"token":e,"request":{"query":m,"user_id":S.userId}});case 5:t=n.sent,a=Object(u.a)({"content":Object(C.get)(t,"data.data"),"isMyself":!1},w),l((function(e){return[].concat(Object(g.a)(e),[a])}));case 8:case"end":return n.stop()}}),_callee)}))),[m]),b=Object(c.useRef)(null);return Object(c.useEffect)((function(){b.current&&(b.current.scrollTop=b.current.scrollHeight)}),[a]),r.a.createElement("div",{"className":"chat"},r.a.createElement("div",{"className":"chat-title"},"小刘同学"),r.a.createElement("div",{"className":"chat-main","ref":b},a.map((function(e,t){return r.a.createElement(_,Object(y.a)({"key":t},e))}))),r.a.createElement("div",{"className":"chat-input"},r.a.createElement(s.e,{"name":"chat","type":"text","placeholder":"请输入","value":m,"onChange":function onInputChange(e){d(e)}},r.a.createElement(s.b,{"size":"small","type":"primary","onClick":p},"发送"))))},V=(a(190),a(191),a(192),a(193),a(194),a(195),a(196),Object(o.b)({"key":"commentAtom","default":{"isOpened":!1,"mediaId":"","data":[]}})),A=function Comment(){var e=Object(o.c)(V),t=Object(n.a)(e,2),a=t[0],l=a.isOpened,i=a.mediaId,m=a.data,d=t[1],p=Object(c.useState)(""),b=Object(n.a)(p,2),f=b[0],O=b[1],j=Object(c.useState)(!1),v=Object(n.a)(j,2),y=v[0],E=v[1],g=Object(c.useCallback)(Object(k.a)(h.a.mark((function _callee2(){var e;return h.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:if(!f){t.next=15;break}return E(!0),t.prev=2,t.next=5,Object(I.e)(Object(u.a)({"mediaId":i,"content":f},S));case 5:return t.next=7,Object(I.a)(i);case 7:e=t.sent,d((function(t){return Object(u.a)(Object(u.a)({},t),{},{"data":Object(C.get)(e,"data.data")||[]})})),O(""),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(2);case 14:E(!1);case 15:case"end":return t.stop()}}),_callee2,null,[[2,12]])}))),[i,f]),N=Object(C.sortBy)((Array.isArray(m)?m:[]).map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{"index":m.length-t})})),["index"]);return r.a.createElement(s.c,{"isOpened":l,"title":"评论","scrollTop":800,"onClose":function onClose(){d({"isOpened":!1,"mediaId":"","data":[]})}},r.a.createElement("div",{"className":"comment-main"},N.map((function(e,t){return r.a.createElement("div",{"key":t,"className":"comment"},r.a.createElement(s.a,{"circle":!0,"image":e.avatar,"size":"small","className":"comment-avatar"}),r.a.createElement("div",{"className":"comment-main"},r.a.createElement("div",{"className":"comment-name"},e.userName),r.a.createElement("div",{"className":"comment-content"},e.content),r.a.createElement("div",{"className":"comment-time"},e.updateTime)))}))),r.a.createElement("div",{"className":"comment-input"},r.a.createElement(s.e,{"name":"comment","type":"text","placeholder":"请输入评论","value":f,"onChange":function onInputChange(e){O(e)}},r.a.createElement(s.b,{"size":"small","type":"primary","loading":y,"onClick":g},"发表"))))},z=function CommentIcon(e){var t=e.commentId,a=Object(o.c)(V),l=Object(n.a)(a,2),i=l[0],m=i.isOpened,d=i.mediaId,p=l[1],b=function useData(e,t){var a=Object(c.useState)([]),r=Object(n.a)(a,2),l=r[0],i=r[1];return Object(c.useEffect)((function(){t&&function(){var t=Object(k.a)(h.a.mark((function _callee(){var t;return h.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(I.a)(e);case 3:t=a.sent,i(Object(C.get)(t,"data.data")||[]),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.log(a.t0);case 10:case"end":return a.stop()}}),_callee,null,[[0,7]])})));return function init(){return t.apply(this,arguments)}}()()}),[t]),l}(t,m),f=Object(c.useCallback)((function(){p({"isOpened":!0,"data":b,"mediaId":t})}),[b]);return Object(c.useEffect)((function(){t===d&&p((function(e){return Object(u.a)(Object(u.a)({},e),{},{"data":b})}))}),[b]),r.a.createElement("div",{"className":"tiktok-comment"},r.a.createElement("div",{"onClick":f},r.a.createElement(s.d,{"className":"tiktok-comment-icon","value":"message","customStyle":{"fontSize":40},"color":"#FFF"}),r.a.createElement("div",{"className":"tiktok-comment-text"},"写评论")))},D=(a(197),function Fullpage(){var e=r.a.useRef([]),t=function useData(){var e=Object(c.useState)((function(){return Object(I.b)().data}));return Object(n.a)(e,1)[0]}(),a=Object(c.useCallback)((function(t,a){var n=e.current[a.index];n&&n.player&&(document.addEventListener("WeixinJSBridgeReady",(function(){e.current.forEach((function(e,t){e.player.play(),t!==a.index&&e.player.pause()}))}),!1),n.player.play());var c=e.current[t.index];t.index!==a.index&&c&&c.player&&c.player.pause()}),[e.current]),l=Object(c.useCallback)((function(){return r.a.createElement("div",null,t.map((function(a,n){return r.a.createElement("div",{"className":"section","key":n},r.a.createElement(v,{"src":a.resource,"ref":function ref(a){e.current.length<t.length&&e.current.push(a)}}),r.a.createElement(z,{"commentId":a.mediaId}))})))}),[t]);return 0===t.length?null:r.a.createElement(o.a,null,r.a.createElement(i.a,{"licenseKey":"YOUR_KEY_HERE","continuousVertical":!0,"scrollingSpeed":500,"afterLoad":a,"render":l}),r.a.createElement(A,null))}),M=[{"title":"看视频","iconType":"image"},{"title":"聊天","iconType":"message","text":"1","max":99}];t.default=function App(){var e=Object(c.useState)(0),t=Object(n.a)(e,2),a=t[0],l=t[1];return r.a.createElement("div",null,r.a.createElement(s.f,{"fixed":!0,"tabList":M,"onClick":function handleClick(e){l(e)},"current":a}),0===a?r.a.createElement(D,null):r.a.createElement(P,null))}}}]);